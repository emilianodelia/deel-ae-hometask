version: 2

models:
  - name: fct_globepay_transactions
    description: >
      Fact model that stores globepay transactions with their corresponding 
      acceptance and chargeback status
    columns:
      - name: transaction_id
        description: '{{ doc("transaction_id") }}'
        data_tests:
          - unique:
              config:
                severity: error
          - not_null:
              config:
                severity: error
      - name: event_id
        description: '{{ doc("event_id") }}'

      - name: processed_at
        description: '{{ doc("processed_at") }}'

      - name: transaction_status
        description: '{{ doc("transaction_status") }}'

      - name: is_cvv_provided
        description: '{{ doc("is_cvv_provided") }}'

      - name: country_code
        description: '{{ doc("country_code") }}'

      - name: local_currency
        description: '{{ doc("local_currency") }}'

      - name: local_amount
        description: '{{ doc("local_amount") }}'
      
      - name: settled_amount_usd
        description: '{{ doc("settled_amount_usd") }}'

      - name: is_valid
        description: '{{ doc("is_valid") }}'
      
      - name: has_chargeback
        description: '{{ doc("has_chargeback") }}'
      
      - name: has_chargeback_evidence
        description: '{{ doc("has_chargeback_evidence") }}'