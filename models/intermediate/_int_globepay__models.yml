version: 2

models:
  - name: int_transactions_joined
    description: >
     Intermediate version for the reporting model that stores Globepay transactions along
     with their corresponding accetance rate and chargeback status
    columns:
      - name: event_id
        description: "Unique event identifier associated with the recorded transaction"
        data_tests:
          - unique:
              config:
                severity: error
          - not_null:
              config:
                severity: error
      
      - name: transaction_id
        description: "Unique externally generated identifier of the transaction record"
        data_tests:
          - unique:
              config:
                severity: error
          - not_null:
              config:
                severity: error

      - name: status
        description: "The binary state of the transaction, it could be either accepted or declined"
        data_tests:
          - accepted_values:
              arguments:
                values: ['ACCEPTED', 'DECLINED']
              config:
                severity: warn
      
      - name: processed_at
        description:  "UTC timestamp of the transaction, converted from the ISO 8601 Zulu format."
        data_tests:
          - not_null:
              config:
                severity: warn