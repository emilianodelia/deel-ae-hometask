version: 2

models:
  - name: int_base_transaction_report_1_scope_definition
    description: >
      Primary staging and cleansing layer for Globepay transactions. 
      This model standardizes column headers, casts data types (including 
      ISO-compliant timestamps), and normalizes currency amounts from 
      minor units to standard decimal format

  - name: build_base_transaction_report
    description: >
      Build/Validation version for the base reporting model that stores Globepay transactions
    columns:
      - name: event_id
        description: "Unique event identifier associated with the recorded transaction"
        data_tests:
          - unique:
              config:
                severity: error
          - not_null:
              config:
                severity: error
      
      - name: transaction_id
        description: "Unique externally generated identifier of the transaction record"
        data_tests:
          - unique:
              config:
                severity: error
          - not_null:
              config:
                severity: error

      - name: status
        description: "The binary state of the transaction, it could be either accepted or declined"
        data_tests:
          - accepted_values:
              arguments:
                values: ['ACCEPTED', 'DECLINED']
              config:
                severity: warn
      
      - name: processed_at
        description:  "UTC timestamp of the transaction, converted from the ISO 8601 Zulu format."
        data_tests:
          - not_null:
              config:
                severity: warn